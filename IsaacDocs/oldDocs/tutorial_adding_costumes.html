<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--Lua Codehightlight--><link href="prism.css" rel="stylesheet" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Binding of Isaac - Afterbirth+ Lua Reference/Guide: Adding Costumes without LUA</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Binding of Isaac - Afterbirth+ Lua Reference/Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tutorial','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">[Tutorial] Adding Costumes to items without LUA</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock">
<!--start Custom comment -->
    <h4>Example mod & code can be found here:</h4>
    <a href="customData/costumes%20examplemod.zip">&#8594; Download the example mod for this Tutorial &#8592;</a>
    <h2>Defining items</h2>
<p>Before adding a costume to an item or trinket, we first need to define items. This can be done by creating an empty <b>"items.xml"</b> file in your mods <b>"content"</b> folder. If that folder does not exist already, create it.</p>
<p>Then add the desired amount of items to your items.xml file. It could then look like this:</p>
<pre><code class="language-xml line-numbers">&lt;items gfxroot=&quot;gfx/items/&quot; version=&quot;1&quot;&gt;
	&lt;passive id=&quot;1&quot; name=&quot;test item 1&quot; description=&quot;Some passive item&quot; gfx=&quot;testitem_1.png&quot; /&gt;
	&lt;active id=&quot;2&quot; name=&quot;test item 2&quot; description=&quot;Some active item&quot; gfx=&quot;testitem_2.png&quot; /&gt;
	&lt;passive id=&quot;999&quot; name=&quot;test item 999&quot; description=&quot;Some passive item but high ID&quot; gfx=&quot;testitem_999.png&quot; /&gt;
	&lt;familiar id=&quot;3&quot; name=&quot;test item 3&quot; description=&quot;Some familiar item&quot; gfx=&quot;testitem_3.png&quot; /&gt;
	&lt;trinket id=&quot;4&quot; name=&quot;test item 4&quot; description=&quot;Some trinket&quot; gfx=&quot;testitem_4.png&quot; /&gt;
&lt;/items&gt;</code></pre>
<p>Note that we also defined IDs for each item. <b>Those IDs are used to assign the Items to their costume!</b> </p><p>IDs located in a "content/items.xml" file are only locally used by the mod. They dont affect other mods and will <b>NOT</b> override existing vanilla items! They will also not define their ingame ID!</p>
<br>
<h2>Defining the costumes</h2>
    <p>Now that we defined some items, we now define our costumes in a <b>"costumes2.xml"</b> file.</p>
    <p><b style="color:red">IMPORTANT:</b> The costume ID and costume Type must be equal to the item id and item type!</p>
 <pre><code class="language-xml line-numbers">&lt;costumes anm2root=&quot;gfx/&quot;&gt;
	&lt;!-- Load order is top to bottom. It is NOT based on the id --&gt;
    &lt;costume id=&quot;1&quot; anm2path=&quot;characters/test_costume_1.anm2&quot; type=&quot;passive&quot; /&gt;
    &lt;costume id=&quot;2&quot; anm2path=&quot;characters/test_costume_2.anm2&quot; type=&quot;active&quot; /&gt;
    &lt;costume id=&quot;999&quot; anm2path=&quot;characters/test_costume_999.anm2&quot; type=&quot;passive&quot; /&gt;
    &lt;costume id=&quot;3&quot; anm2path=&quot;characters/test_costume_3.anm2&quot; type=&quot;familiar&quot; /&gt;
    &lt;costume id=&quot;4&quot; anm2path=&quot;characters/test_costume_4.anm2&quot; type=&quot;trinket&quot; /&gt;
&lt;/costumes&gt;
</code></pre>
<h4>Effects of the item type to the costume:</h4>
    <table class="fieldtable"> <tr><th>Itemtype</th><th>Effect</th></tr>
        <tr><td>passive</td><td>Costume gets added when the pickup animation is finished playing. Costumes gets removed, when the item is removed.</td></tr>
        <tr><td>active</td><td>Costume gets added when the item is used. It gets removed when you change the room.</td></tr>
        <tr><td>trinket</td><td>Costume gets added when the pickup animation is finished playing. Costumes gets removed, when the trinket is removed.</td></tr>
        <tr><td>familiar</td><td>Costume gets added when the pickup animation is finished playing. Costumes gets removed, when the item is removed.</td></tr>
    </table>

<h3>Further Informations:</h3>
    <ul>
    <li>If a costumeID can't be associated with an itemid, the game crashes.</li>
    <li><b>Transformations</b> still must be added using the Null Costume method (LUA-based)</li>
    <li>Costumes of type <b>none</b> actually have a null item associated with it. These Nullcostumes can be added using LUA.</li>
    </ul>

    <hr>
    <h2>Adding Nullcostumes</h2>
    <p>Nullcostumes are costumes that dont have an actual item attached to them. Therefore, they can be used to add temporary costumes like for example Transformations.</p>
    <p>The following code adds a nullcostume to the player in two different ways. Choose the one that fits your neededs.</p>
    
    <h4>costumes2.xml</h4>
    Define a null costume in the "costumes2.xml" file by setting the type to "none". DONT set an ID!
     <pre><code class="language-xml line-numbers">&lt;costumes anm2root=&quot;gfx/&quot;&gt;
    &lt;costume anm2path=&quot;characters/some_null_costume.anm2&quot; type=&quot;none&quot; /&gt;
&lt;/costumes&gt;
</code></pre>
    <h4>main.lua</h4>
    Get the automatically generated CostumeID of the null-Costume, and then apply it to the player
    <pre><code class="language-lua">-- get the internal costumeID
    NullItemID.ID_SOME_NULL_COSTUME = Isaac.GetCostumeIdByPath("gfx/characters/some_null_costume.anm2")
    
-- adding a nullcostume using "AddNullCostume" (persistent till its removed / run is restarted)
function mod:myFunction1(player)
    print("adding null costume")
    if(somethingHappend) then
        player:AddNullCostume (NullItemID.ID_SOME_NULL_COSTUME)
    end
    -- removing the null costume
    if(somethingDifferentHappend) then
        player:TryRemoveNullCostume(NullItemID.ID_SOME_NULL_COSTUME)
    end
end
mod:AddCallback(ModCallbacks.MC_POST_PLAYER_UPDATE, mod.myFunction1, 0)


-- adding a nullcostume using "NullEffects" (persists for current room and gets removed afterwards)
function mod:myFunction2(player)
    if not player:GetEffects():HasNullEffect(NullItemID.ID_SOME_NULL_COSTUME) then
        print("adding null costume") -- will get triggered everytime the room is changed
        player:GetEffects():AddNullEffect(NullItemID.ID_SOME_NULL_COSTUME, true)
    end
end
mod:AddCallback(ModCallbacks.MC_POST_PLAYER_UPDATE, mod.myFunction2, 0)</code></pre>
    
    <br>
    <hr>
    <p>Special thanks to <i><b>Piber20</b></i> and <i><b>JSG</b></i> for figuring out these methods!</p>
<!--End Custom comment -->
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
<!--Lua Codehightlight--><script src="prism.js"></script>
</body>
</html>
