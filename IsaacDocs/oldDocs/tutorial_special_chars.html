<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<!--Lua Codehightlight--><link href="prism.css" rel="stylesheet" />
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Binding of Isaac - Afterbirth+ Lua Reference/Guide: special chars</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Binding of Isaac - Afterbirth+ Lua Reference/Guide
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('tutorial','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">[Tutorial] Render text</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock">
<!--start Custom comment -->
    <h2>Fonts used by the game</h2>
    <p>The Following fonts are used by the game and can be used with the "Font()" class:</p>
         <table class="fieldtable">
<thead>
  <tr>
    <th><b>Font Name</b></th>
    <th><b>Ingame Name/s</b></th>
    <th><b>Ingame Example</b></th>
    <th><b>Ingame Usage</b></th>
    <th><b>Link to font</b></th>
  </tr>
</thead>
<tbody>
  <tr> <td>Droid Sans</td><td>droid</td><td><a href="customImg/tutorial_special_chars/example_droid.png">Example Droid</a></td><td>(Not used ingame)</td><td><a href="customData/droid-sans.zip">Droid Sans</a></td></tr>
  <tr> <td>PF Tempesta Seven (Condensed)</td><td>pftempestasevencondensed</td><td><a href="customImg/tutorial_special_chars/example_pftempestasevencondensed.png">Example PF Tempesta Seven</a></td><td>HUD Elements like coin/key counters</td><td><a href="https://www.dafont.com/pf-tempesta-seven.font">PF Tempesta Seven</a></td></tr>
  <tr> <td>Team Meat Font</td><td><p>teammeatfont10</p><p>teammeatfont12</p><p>teammeatfont16</p><p>teammeatfont16bold</p></td><td><p><a href="customImg/tutorial_special_chars/example_teammeat10.png">Example teammeatfont10</a></p><p><a href="customImg/tutorial_special_chars/example_teammeat12.png">Example teammeatfont12</a></p><p><a href="customImg/tutorial_special_chars/example_teammeat16.png">Example teammeatfont16</a></p><p><a href="customImg/tutorial_special_chars/example_teammeat16bold.png">Example teammeatfont16bold</a></p></td><td><p>Main Menu Elements | Pop-Ups</p><p>Timer / Score Elements</p></td><td><a href="customData/team-meat-font_1.2.zip">Team Meat Font without Bold</a></td></tr>
  <tr> <td>Terminus</td><td><p>terminus</p><p>terminus8</p></td><td><p><a href="customImg/tutorial_special_chars/example_terminus.png">Example Terminus</a></p><p><a href="customImg/tutorial_special_chars/example_terminus8.png">Example Terminus8</a></p></td><td>Debug Console / Isaac.RenderText()</td><td><a href="http://terminus-font.sourceforge.net/">Terminus</a></td></tr>
  <tr> <td>Upheaval</td><td><p>upheaval</p></td><td><a href="customImg/tutorial_special_chars/example_upheaval.png">Example Upheaval</a></td><td>Streak text</td><td><a href="https://www.dafont.com/upheaval.font">Upheaval</a></td></tr>
  <tr> <td>mplus (Japanese)</td><td><p>mplus_10r</p><p>mplus_12b</p></td><td><p><a href="customImg/tutorial_special_chars/example_mplus10r.png">Example mplus_10r</a></p><p><a href="customImg/tutorial_special_chars/example_mplus12b.png">Example mplus_12b</a></p></td><td><p>Replacement for all fonts aboth for Japanese translation.</p><p> 10r is pf "Tempesta seven" / "Team Meat" replacement</p><p> 12b is "Upheaval" replacement</p></td><td> <a href="http://itouhiro.hatenablog.com/entry/20130602/font">PixelMplus</a> <br><a href="https://mplus-fonts.osdn.jp/">(M+ Fonts)</a></td></tr>
  <tr> <td>kr Font (Korean)</td><td><p>kr_font12</p><p>kr_font14</p></td><td><p><a href="customImg/tutorial_special_chars/example_krfont12.png">Example kr_font12</a></p><p><a href="customImg/tutorial_special_chars/example_krfont14.png">Example kr_font14</a></p></td><td>TBD</td><td>No source found right now</td></tr>
  <tr> <td>Team Meat Font (Korean)</td><td><p>kr_meatfont14</p></td><td><a href="customImg/tutorial_special_chars/example_krmeatfont14.png">Example kr_meatfont14</a></td><td>TBD</td><td>- Not available -</td></tr>
  
</tbody>
</table>
    <h2>Basics of rendering a text</h2>
<p>First we need to have a look at the basic process of writing on the screen. here is a sample code:</p>
<pre><code class="language-lua">local testmod= RegisterMod( "testmod" ,1 );

local function onRender(t)
    Isaac.RenderText("Sample text", 50, 30, 1, 1, 1, 255)
end

testmod:AddCallback(ModCallbacks.MC_POST_RENDER, onRender)</code></pre>
<b>Result:</b><br> 
    <img src="customImg/tutorial_special_chars/b1.png" alt=""/><br>
<br>
The game uses the font-file "terminus.fnt" in order to render and display this text. this cant be changed. Luckily for us, this file contains "sprites" for all normal ASCII characters that exist out there (256 to be precise).
    <h2>Rendering text with a different font</h2>
We can render any kind of text with a different font as well. This can be done by using the "Font()" class and its functions.
<div class="example_code">
<pre><code class="language-lua">local f = Font() -- init font object
f:Load("font/droid.fnt") -- load a font into the font object
f:DrawString("droid",60,50,KColor(1,1,1,1,0,0,0),0,true) -- render string with loaded font on position 60x50y
</code></pre>	
</div>
    <h3>All possible Fonts that can be drawn:</h3>
    <img src="customImg/font-types.png" alt="" width="500px" />
    
<h2>Render Special Characters</h2>
The game allows us to write anything into the "displayed text" argument that is part of the ASCII standard for characters. For characters a-z, 0-9 and ,.#+;:_'*~° this works without any problems and without using any kind of "hack".
Now if we just strait up try to type in ' ä ' or ' ß ' to let it render as text, it will not look as intended.<br>
<img src="customImg/tutorial_special_chars/b2.png" alt="" width="700px"/>
<br>
In order to fix this problem we have to use the "raw" version of said characters.
Example:

<pre><code class="language-lua">\197   </code></pre>
prints:

<pre><code class="language-lua">Ä</code></pre>
So in order to print special characters, just replace them in the code like this:

<pre><code class="language-lua">Isaac.RenderText("S\228mple text", 50, 30, 1, 1, 1, 255)</code></pre>
prints:
<pre><code class="language-lua">Sämple text</code></pre>
<h2>List of all supported characters and their counterpart</h2> 
<img src="customImg/tutorial_special_chars/b3.png" alt="" width="800px"/>
<br><br>
    <hr>
<h1>Creating .fnt files</h1>
<p>The Developer <i>_Kilburn</i> mentioned that fonts can be created using this Tool: <a href:"https://www.angelcode.com/products/bmfont/">https://www.angelcode.com/products/bmfont</a>.</p>
<p>The best results can be made by converting Bitmap fonts, since they allow for smaller fontsizes.</p>
    <img src="customImg/BM_font-settings.png" alt="" width="225px" style="float: left; padding-right: 25px;"/>
<p><b>Font Settings:</b></p>
    <ul>
        <li><b>Font</b> - choose a font thats very readable in small sizes (~8-10px height)</li>
        <li><b>Charset</b> - Unicode</li>
        <li><b>Size</b> - the general size of the characters in pixels. normal values are between 10 and 16</li>
        <li><b>Height</b> - can be used to squish/strech the </li>
        <li><b>Match char height</b> - the charactersize will be choosen based on the character, and not the size defined in <b>Size</b></li>
        <li><b>Bold / Italic</b> - What font styling should be used</li>
        <li><b>Output invalid char glyph</b> - Characters that dont have a sprite will be put on the spritesheet, too. This can create holes in the spritesheet</li>
        <li><b>Do not include kerning pairs</b> - ?</li>
        <li></li>
        <li><b>Rasterization</b> - used to smooth the font sprites. Not recommended for Isaac since we want pixel-perfect fonts!</li>
        <li></li>
        <li><b>Outline thickness</b> - Define if an outline should be drawn around the character. In Isaac, this is always ~1px</li>
    </ul>
    <br>
    <br>
    <br>
    <br>
    <img src="customImg/BM_export-settings.png" alt="" width="225px" style="float: left; padding-right: 25px;"/>
<p><b>Export Options:</b></p>
    <ul>
        <li><b>Padding</b> - Padding around each character, in pixels</li>
        <li><b>Spacing</b> - Space between characters, in pixels</li>
        <li><b>Equalize the cell heights</b> - will align all characters in a way, so they take up the least space vertically. off = they group in more uniform rows</li>
        <li></li>
        <li><b>Width / Height</b> - Width and Height of each character spritesheet. If spritesheet isnt big enough, multiple files will be created</li>
        <li><b>Bit depth</b> - how many Bits should be used per color. ALWAYS choose 32 bit! </li>
        <li><b>Pack chars in multiple Channels</b> - Dont use this. We need all channels for out font because of transparencies!</li>
        <li></li>
        <li><b>File format</b> - Choose Binary to create ".fnt" files</li>
        <li><b>Textures</b> - always set it to "png"</li>
        <li><b>Compression</b> - (only one option available)</li>
    </ul>
</div>
<br><br><br>
<!--End Custom comment -->
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
<!--Lua Codehightlight--><script src="prism.js"></script>
</body>
</html>
